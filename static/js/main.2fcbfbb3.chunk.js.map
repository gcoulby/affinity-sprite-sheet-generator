{"version":3,"sources":["img/logo.svg","components/main.jsx","App.js","reportWebVitals.js","index.js"],"names":["Main","state","files","filename","svg","color","progress","xml","declaration","attributes","version","encoding","elements","type","comment","name","xmlns","x","y","viewBox","style","handleFilesChange","evt","i","target","length","file","console","log","webkitRelativePath","push","setState","handleCreateButtonClicked","map","setProgress","readBlob","findPath","obj","id","key","_","has","flatten","v","stop","size","reader","FileReader","onloadend","readyState","DONE","fileContents","result","require","xml2js","compact","spaces","s","path","d","_attributes","replace","fill","ex","downloadFile","blob","slice","readAsBinaryString","js2xml","Blob","a","document","createElement","body","appendChild","setAttribute","url","window","URL","createObjectURL","href","download","click","revokeObjectURL","onColorChange","value","handleFilenameChange","nodes","node","newPath","union","assign","pathname","join","level","omit","this","recurse","children","Fragment","class","src","logo","width","className","onChange","e","multiple","accept","placeholder","onClick","role","aria-valuenow","aria-valuemin","aria-valuemax","Component","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2fcbfbb3.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.96c68b37.svg\";","import React, { Component } from \"react\";\r\nimport \"xml-js/dist/xml-js.js\";\r\nimport _ from \"lodash\";\r\nimport logo from \"../img/logo.svg\";\r\n\r\nclass Main extends Component {\r\n  state = {\r\n    files: [],\r\n    filename: \"svg_sprite_sheet\",\r\n    svg: {\r\n      svg: [],\r\n    },\r\n    color: \"#787878\",\r\n    progress: 0,\r\n    xml: {\r\n      declaration: {\r\n        attributes: {\r\n          version: \"1.0\",\r\n          encoding: \"iso-8859-1\",\r\n        },\r\n      },\r\n      elements: [\r\n        {\r\n          type: \"comment\",\r\n          comment: \" Generator: Affinity SVG Asset Cleaner by Graham Coulby https://grahamcoulby.co.uk/\",\r\n        },\r\n        {\r\n          type: \"element\",\r\n          name: \"svg\",\r\n          attributes: {\r\n            version: \"1.1\",\r\n            xmlns: \"http://www.w3.org/2000/svg\",\r\n            \"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\r\n            x: \"0px\",\r\n            y: \"0px\",\r\n            viewBox: \"0 0 64 64\",\r\n            style: \"enable-background:new 0 0 64 64;\",\r\n            \"xml:space\": \"preserve\",\r\n          },\r\n          elements: [],\r\n        },\r\n      ],\r\n    },\r\n  };\r\n\r\n  handleFilesChange = (evt) => {\r\n    const files = [];\r\n\r\n    for (let i = 0; i < evt.target.files.length; i++) {\r\n      const file = evt.target.files[i];\r\n      console.log(file.webkitRelativePath);\r\n      files.push(file);\r\n    }\r\n    this.setState({ files });\r\n  };\r\n\r\n  handleCreateButtonClicked = () => {\r\n    const xml = this.state.xml;\r\n    xml.elements[1].elements = [];\r\n    this.setState({ xml });\r\n\r\n    this.state.files.map((file, i) => {\r\n      this.setProgress(i);\r\n      this.readBlob(file, i);\r\n    });\r\n\r\n    this.setProgress(this.state.files.length);\r\n  };\r\n\r\n  recurse(nodes, path) {\r\n    return _.map(nodes, function (node) {\r\n      var newPath = _.union(path, [node.name]);\r\n      return [\r\n        _.assign({ pathname: newPath.join(\" > \"), level: path.length }, _.omit(node, \"children\")),\r\n        this.recurse(node.children, newPath),\r\n      ];\r\n    });\r\n  }\r\n\r\n  setProgress = (i) => {\r\n    const progress = (i > 0 ? i / this.state.files.length : 0) * 100;\r\n\r\n    this.setState({ progress });\r\n  };\r\n\r\n  findPath = (obj, id, key = \"path\") => {\r\n    if (_.has(obj, key)) return [obj];\r\n    return _.flatten(\r\n      _.map(obj, (v) => {\r\n        let o = typeof v == \"object\" ? this.findPath(v, key) : [];\r\n\r\n        return o;\r\n      }),\r\n      true\r\n    );\r\n  };\r\n\r\n  readBlob = (file, i) => {\r\n    let start = 0;\r\n    let stop = file.size - 1;\r\n    let reader = new FileReader();\r\n    reader.onloadend = (evt) => {\r\n      if (evt.target.readyState === FileReader.DONE) {\r\n        this.setState({ fileContents: evt.target.result });\r\n        var convert = require(\"xml-js\");\r\n        let result = convert.xml2js(evt.target.result, {\r\n          compact: true,\r\n          spaces: 4,\r\n        });\r\n        let s = this.findPath(result);\r\n        try {\r\n          let path = {\r\n            type: \"element\",\r\n            name: \"path\",\r\n            attributes: { d: s[0].path._attributes.d, id: file.name.replace(\".svg\", \"\"), fill: this.state.color },\r\n          };\r\n          const xml = this.state.xml;\r\n          xml.elements[1]?.elements.push(path);\r\n\r\n          this.setState({ xml });\r\n        } catch (ex) {\r\n          console.log(ex, file.name);\r\n        }\r\n        if (i == this.state.files.length - 1) {\r\n          this.downloadFile();\r\n        }\r\n      }\r\n    };\r\n    var blob = file.slice(start, stop + 1);\r\n    reader.readAsBinaryString(blob);\r\n  };\r\n\r\n  downloadFile = () => {\r\n    var convert = require(\"xml-js\");\r\n    let xml = convert.js2xml(this.state.xml);\r\n    let blob = new Blob([xml]);\r\n    var a = document.createElement(\"a\");\r\n    document.body.appendChild(a);\r\n    a.setAttribute(\"style\", \"display:none\");\r\n    let url = window.URL.createObjectURL(blob);\r\n    a.href = url;\r\n    a.download = `${this.state.filename}.svg` ?? \"svg_sprite_sheet.svg\";\r\n    a.click();\r\n    window.URL.revokeObjectURL(url);\r\n    this.setProgress(0);\r\n  };\r\n\r\n  onColorChange = (evt) => {\r\n    this.setState({ color: evt.target.value });\r\n  };\r\n\r\n  handleFilenameChange = (evt) => {\r\n    this.setState({ filename: evt.target.value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div class=\"container-fluid bg-dark text-light pt-5 page\">\r\n          <div class=\"row\">\r\n            <div class=\"col-lg-12 text-center\">\r\n              <img src={logo} width=\"100\" />\r\n              <h1 class=\"mt-5\">Affinity Asset Sprite Sheet Creator</h1>\r\n              <div class=\"row text-center\">\r\n                <div className=\"col\">\r\n                  <h4>1. Choose Color</h4>\r\n                  <input\r\n                    type=\"color\"\r\n                    id=\"html5colorpicker\"\r\n                    value={this.state.color}\r\n                    onChange={(e) => this.onColorChange(e)}\r\n                    className=\"form-control\"\r\n                  />\r\n                  <h4 className=\"mt-5\">2. Choose Files</h4>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"fileChooser\"\r\n                    multiple\r\n                    onChange={(e) => this.handleFilesChange(e)}\r\n                    accept=\"image/svg, .svg\"\r\n                    className=\"form-control bg-dark text-light\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row text-center justify-content-md-center\">\r\n                <div className=\"col-3\">\r\n                  <h4 className=\"mt-5\">3. Choose a filename</h4>\r\n                  <input\r\n                    placeholder=\"filename\"\r\n                    className=\"form-control\"\r\n                    value={this.state.filename}\r\n                    onChange={(e) => this.handleFilenameChange(e)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row text-center\">\r\n                <div className=\"col\">\r\n                  <h4 className=\"mt-5\">3. Create Sprite Sheet</h4>\r\n                  <button className=\"btn btn-outline-light\" onClick={() => this.handleCreateButtonClicked()}>\r\n                    Create\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row text-center mt-2 mb-4 justify-content-md-center\">\r\n                <div className=\"col-4\">\r\n                  <div class=\"progress\">\r\n                    <div\r\n                      className=\"progress-bar\"\r\n                      role=\"progressbar\"\r\n                      style={{ width: this.state.progress + \"%\" }}\r\n                      aria-valuenow=\"25\"\r\n                      aria-valuemin=\"0\"\r\n                      aria-valuemax=\"100\"\r\n                    ></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Main;\r\n","import React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"bootstrap/dist/js/bootstrap.js\";\nimport \"./styles/css-compiled/main.css\";\n\nimport \"./App.css\";\nimport Main from \"./components/main\";\n\nclass App extends Component {\n  render() {\n    return (\n      <React.Fragment>\n        <Main />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}